# ğŸŒ¿ Complete Supply Chain Flow - Visual Guide

## ğŸ“Š Overview Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HERBAL SUPPLY CHAIN FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ‘¨â€ğŸŒ¾ FARMER                ğŸšš SUPPLIER              ğŸ­ INDUSTRY           ğŸ‘¤ CONSUMER
   â”‚                        â”‚                        â”‚                    â”‚
   â”‚ 1. Register           â”‚ 4. Register            â”‚ 9. Register        â”‚ 15. Register
   â”‚ 2. Verify OTP         â”‚ 5. Verify OTP          â”‚ 10. Verify OTP     â”‚ 16. Verify OTP
   â”‚                        â”‚                        â”‚                    â”‚
   â–¼                        â”‚                        â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                        â”‚                    â”‚
â”‚  CREATE  â”‚               â”‚                        â”‚                    â”‚
â”‚  BATCH   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚                    â”‚
â”‚ + QR CODEâ”‚ 3. Created    â”‚                        â”‚                    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â”‚                        â”‚                    â”‚
     â”‚                     â”‚                        â”‚                    â”‚
     â”‚ QR Generated        â”‚                        â”‚                    â”‚
     â”‚ Status: harvested   â”‚                        â”‚                    â”‚
     â”‚                     â”‚                        â”‚                    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                        â”‚                    â”‚
                           â”‚ 6. Scans QR            â”‚                    â”‚
                           â”‚    (Sees farmer info)  â”‚                    â”‚
                           â”‚                        â”‚                    â”‚
                           â–¼                        â”‚                    â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                    â”‚
                      â”‚ PAYMENT â”‚                   â”‚                    â”‚
                      â”‚ â‚¹5,000  â”‚                   â”‚                    â”‚
                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â”‚                    â”‚
                           â”‚ 7-8. Pay Farmer        â”‚                    â”‚
                           â”‚                        â”‚                    â”‚
                           â–¼                        â”‚                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚                    â”‚
                    â”‚  OWNERSHIP   â”‚                â”‚                    â”‚
                    â”‚ TRANSFERRED  â”‚                â”‚                    â”‚
                    â”‚ TO SUPPLIER  â”‚                â”‚                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                    â”‚
                           â”‚                        â”‚                    â”‚
                           â”‚ Status: with_supplier  â”‚                    â”‚
                           â”‚                        â”‚                    â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                    â”‚
                                                    â”‚ 11. Scans QR       â”‚
                                                    â”‚     (Sees chain)   â”‚
                                                    â”‚                    â”‚
                                                    â–¼                    â”‚
                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
                                               â”‚ PAYMENT â”‚               â”‚
                                               â”‚ â‚¹7,000  â”‚               â”‚
                                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚
                                                    â”‚ 12-13. Pay Supplierâ”‚
                                                    â”‚                    â”‚
                                                    â–¼                    â”‚
                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
                                             â”‚  OWNERSHIP   â”‚            â”‚
                                             â”‚ TRANSFERRED  â”‚            â”‚
                                             â”‚ TO INDUSTRY  â”‚            â”‚
                                             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                                                    â”‚                    â”‚
                                                    â”‚ Status: with_industry
                                                    â”‚                    â”‚
                                                    â–¼                    â”‚
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
                                            â”‚ CREATE FINAL  â”‚            â”‚
                                            â”‚   PRODUCT     â”‚            â”‚
                                            â”‚  + NEW QR     â”‚            â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                                                    â”‚ 14. Created        â”‚
                                                    â”‚                    â”‚
                                                    â”‚ Product QR         â”‚
                                                    â”‚                    â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
                                                                         â”‚ 17. Scans
                                                                         â”‚     Product QR
                                                                         â”‚
                                                                         â–¼
                                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                  â”‚   COMPLETE   â”‚
                                                                  â”‚   JOURNEY    â”‚
                                                                  â”‚   VISIBLE!   â”‚
                                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BATCH LIFECYCLE                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BATCH CREATION (Farmer)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Herb: Ashwagandha                    â”‚
â”‚ â€¢ Quantity: 100 kg                     â”‚
â”‚ â€¢ GPS: 12.9716, 77.5946               â”‚
â”‚ â€¢ Location: Kothapalli, Kodagu        â”‚
â”‚ â€¢ Quality: Grade A+, 98% purity       â”‚
â”‚ â€¢ Price: â‚¹5,000                        â”‚
â”‚ â€¢ QR Code: AUTO-GENERATED              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  CHAIN EVENT 1 â”‚
        â”‚  BatchCreated  â”‚
        â”‚  by Farmer     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
SUPPLIER PURCHASE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Scans QR â†’ Sees all farmer data      â”‚
â”‚ â€¢ Creates payment order                â”‚
â”‚ â€¢ Pays â‚¹5,000 (Cash/Razorpay)         â”‚
â”‚ â€¢ Ownership transferred                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  CHAIN EVENT 2 â”‚
        â”‚ SupplierPurchaseâ”‚
        â”‚  Transaction:   â”‚
        â”‚  â‚¹5,000 paid    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
INDUSTRY PURCHASE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Scans QR â†’ Sees farmer + supplier    â”‚
â”‚ â€¢ Creates payment order                â”‚
â”‚ â€¢ Pays â‚¹7,000 (Cash/Razorpay)         â”‚
â”‚ â€¢ Ownership transferred                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  CHAIN EVENT 3 â”‚
        â”‚IndustryPurchaseâ”‚
        â”‚  Transaction:   â”‚
        â”‚  â‚¹7,000 paid    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
FINAL PRODUCT CREATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Product: Ashwagandha Capsules        â”‚
â”‚ â€¢ Brand: Himalaya                      â”‚
â”‚ â€¢ Source Batch: Linked                 â”‚
â”‚ â€¢ Certifications: GMP                  â”‚
â”‚ â€¢ Lab Tests: Heavy Metal - Pass        â”‚
â”‚ â€¢ MRP: â‚¹499                            â”‚
â”‚ â€¢ NEW QR CODE: AUTO-GENERATED          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  CHAIN EVENT 4 â”‚
        â”‚ProductCreated  â”‚
        â”‚  by Industry   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
CONSUMER SCAN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPLETE JOURNEY VISIBLE:              â”‚
â”‚                                        â”‚
â”‚ ğŸ‘¨â€ğŸŒ¾ Farmer: Ramesh Kumar               â”‚
â”‚    ğŸ“ Kothapalli, Kodagu               â”‚
â”‚    ğŸŒ¾ Ashwagandha, 100kg, Grade A+     â”‚
â”‚    ğŸ“… Harvested: 2025-12-10            â”‚
â”‚                                        â”‚
â”‚ ğŸšš Supplier: Suresh Patil              â”‚
â”‚    ğŸš› Patil Transport                  â”‚
â”‚    ğŸ’° Paid: â‚¹5,000                     â”‚
â”‚                                        â”‚
â”‚ ğŸ­ Industry: Himalaya Wellness         â”‚
â”‚    âœ… GMP Certified                    â”‚
â”‚    ğŸ§ª Lab Tests: Pass                  â”‚
â”‚    ğŸ’° Paid: â‚¹7,000                     â”‚
â”‚                                        â”‚
â”‚ ğŸ“¦ Product: Ashwagandha Capsules       â”‚
â”‚    ğŸ’Š 60 capsules                      â”‚
â”‚    ğŸ’° MRP: â‚¹499                        â”‚
â”‚    âœ¨ Benefits: Stress relief          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication Flow

```
REGISTRATION FLOW (All Roles)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  1. POST /auth/register                                      â”‚
â”‚     â”œâ”€ Body: { role, phone, ...details }                    â”‚
â”‚     â””â”€ Response: { userId, otpExpiresAt }                   â”‚
â”‚                                                              â”‚
â”‚  2. Check Console                                            â”‚
â”‚     â””â”€ ğŸ§ª TEST OTP: 123456                                   â”‚
â”‚                                                              â”‚
â”‚  3. POST /auth/verify-registration                           â”‚
â”‚     â”œâ”€ Body: { phone, otp, role }                           â”‚
â”‚     â””â”€ Response: { user, accessToken, refreshToken }        â”‚
â”‚                                                              â”‚
â”‚  4. Save Token                                               â”‚
â”‚     â””â”€ Use in Authorization header for future requests      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LOGIN FLOW (Returning Users)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  1. POST /auth/login                                         â”‚
â”‚     â”œâ”€ Body: { phone }                                       â”‚
â”‚     â””â”€ Response: { otpExpiresAt }                           â”‚
â”‚                                                              â”‚
â”‚  2. Check Console                                            â”‚
â”‚     â””â”€ ğŸ§ª TEST OTP: 123456                                   â”‚
â”‚                                                              â”‚
â”‚  3. POST /auth/verify-login                                  â”‚
â”‚     â”œâ”€ Body: { phone, otp }                                  â”‚
â”‚     â””â”€ Response: { user, accessToken, refreshToken }        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° Payment Flow

```
PAYMENT PROCESS (Supplier/Industry)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  1. Scan Batch QR                                            â”‚
â”‚     â””â”€ GET /supply-chain/batches/scan/:batchId              â”‚
â”‚        â””â”€ See: Price, Quality, Owner details                â”‚
â”‚                                                              â”‚
â”‚  2. Create Payment Order                                     â”‚
â”‚     â””â”€ POST /payments/create-order                          â”‚
â”‚        â”œâ”€ Body: { batchId, payerId, amount, mode }          â”‚
â”‚        â””â”€ Response: { paymentId, razorpayOrder }            â”‚
â”‚                                                              â”‚
â”‚  3. Complete Payment (Choose one)                            â”‚
â”‚                                                              â”‚
â”‚     OPTION A: Razorpay                                       â”‚
â”‚     â””â”€ POST /payments/verify                                â”‚
â”‚        â”œâ”€ Body: { paymentId, razorpaySignature }            â”‚
â”‚        â””â”€ Response: { payment, batch, chainEvent }          â”‚
â”‚                                                              â”‚
â”‚     OPTION B: Cash (Easier for testing)                      â”‚
â”‚     â””â”€ POST /payments/cash-payment                          â”‚
â”‚        â”œâ”€ Body: { paymentId, receivedBy, receipt }          â”‚
â”‚        â””â”€ Response: { payment, batch, chainEvent }          â”‚
â”‚                                                              â”‚
â”‚  4. Automatic Actions                                        â”‚
â”‚     â”œâ”€ âœ… Payment status â†’ completed                        â”‚
â”‚     â”œâ”€ âœ… Ownership transferred                             â”‚
â”‚     â”œâ”€ âœ… Batch status updated                              â”‚
â”‚     â””â”€ âœ… Chain event created                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± QR Code System

```
TWO TYPES OF QR CODES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  1. BATCH QR CODE (Created by Farmer)                        â”‚
â”‚     â”œâ”€ Contains: Batch ID                                    â”‚
â”‚     â”œâ”€ Scan endpoint: /supply-chain/batches/scan/:id        â”‚
â”‚     â”œâ”€ Shows: Farmer â†’ Supplier â†’ Industry chain            â”‚
â”‚     â””â”€ Used by: Supplier, Industry                          â”‚
â”‚                                                              â”‚
â”‚  2. PRODUCT QR CODE (Created by Industry)                    â”‚
â”‚     â”œâ”€ Contains: Product ID                                  â”‚
â”‚     â”œâ”€ Scan endpoint: /final-products/scan/:id              â”‚
â”‚     â”œâ”€ Shows: Complete journey + Product details            â”‚
â”‚     â””â”€ Used by: Consumer                                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

QR CODE GENERATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Batch Created                Product Created                â”‚
â”‚       â”‚                              â”‚                       â”‚
â”‚       â–¼                              â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚Generate â”‚                   â”‚Generate â”‚                  â”‚
â”‚  â”‚Batch QR â”‚                   â”‚Product  â”‚                  â”‚
â”‚  â”‚  Code   â”‚                   â”‚QR Code  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                  â”‚
â”‚       â”‚                              â”‚                       â”‚
â”‚       â–¼                              â–¼                       â”‚
â”‚  qrCodeURL                      qrCodeURL                    â”‚
â”‚  qrCodeData (base64)            qrCodeData (base64)          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Database Changes

```
WHAT HAPPENS IN DATABASE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  FARMER CREATES BATCH                                        â”‚
â”‚  â”œâ”€ ProductBatch document created                           â”‚
â”‚  â”œâ”€ ChainEvent: "BatchCreated"                              â”‚
â”‚  â”œâ”€ currentOwner: Farmer                                     â”‚
â”‚  â””â”€ status: "harvested"                                      â”‚
â”‚                                                              â”‚
â”‚  SUPPLIER PURCHASES                                          â”‚
â”‚  â”œâ”€ Payment document created                                â”‚
â”‚  â”œâ”€ ChainEvent: "SupplierPurchase"                          â”‚
â”‚  â”œâ”€ currentOwner: Supplier                                   â”‚
â”‚  â””â”€ status: "with_supplier"                                  â”‚
â”‚                                                              â”‚
â”‚  INDUSTRY PURCHASES                                          â”‚
â”‚  â”œâ”€ Payment document created                                â”‚
â”‚  â”œâ”€ ChainEvent: "IndustryPurchase"                          â”‚
â”‚  â”œâ”€ currentOwner: Industry                                   â”‚
â”‚  â””â”€ status: "with_industry"                                  â”‚
â”‚                                                              â”‚
â”‚  INDUSTRY CREATES PRODUCT                                    â”‚
â”‚  â”œâ”€ FinalProduct document created                           â”‚
â”‚  â”œâ”€ ChainEvent: "ProductCreated"                            â”‚
â”‚  â”œâ”€ sourceBatches linked                                     â”‚
â”‚  â”œâ”€ Batch status: "processed"                               â”‚
â”‚  â””â”€ New QR code generated                                    â”‚
â”‚                                                              â”‚
â”‚  CONSUMER SCANS                                              â”‚
â”‚  â”œâ”€ Scan count incremented                                  â”‚
â”‚  â”œâ”€ Complete journey fetched                                â”‚
â”‚  â””â”€ All chain events visible                                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Testing Sequence

```
STEP-BY-STEP EXECUTION ORDER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  PHASE 1: FARMER (3 requests)                                â”‚
â”‚  â”œâ”€ 1. Register Farmer                                       â”‚
â”‚  â”œâ”€ 2. Verify OTP                                            â”‚
â”‚  â””â”€ 3. Create Batch â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º BATCH QR GENERATED       â”‚
â”‚                                                              â”‚
â”‚  PHASE 2: SUPPLIER (5 requests)                              â”‚
â”‚  â”œâ”€ 4. Register Supplier                                     â”‚
â”‚  â”œâ”€ 5. Verify OTP                                            â”‚
â”‚  â”œâ”€ 6. Scan Batch QR â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Use Batch QR             â”‚
â”‚  â”œâ”€ 7. Create Payment                                        â”‚
â”‚  â””â”€ 8. Complete Payment â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º OWNERSHIP TRANSFERRED     â”‚
â”‚                                                              â”‚
â”‚  PHASE 3: INDUSTRY (6 requests)                              â”‚
â”‚  â”œâ”€ 9. Register Industry                                     â”‚
â”‚  â”œâ”€ 10. Verify OTP                                           â”‚
â”‚  â”œâ”€ 11. Scan Batch QR â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Use Batch QR             â”‚
â”‚  â”œâ”€ 12. Create Payment                                       â”‚
â”‚  â”œâ”€ 13. Complete Payment â”€â”€â”€â”€â”€â”€â”€â”€â–º OWNERSHIP TRANSFERRED     â”‚
â”‚  â””â”€ 14. Create Product â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º PRODUCT QR GENERATED      â”‚
â”‚                                                              â”‚
â”‚  PHASE 4: CONSUMER (3 requests)                              â”‚
â”‚  â”œâ”€ 15. Register Consumer                                    â”‚
â”‚  â”œâ”€ 16. Verify OTP                                           â”‚
â”‚  â””â”€ 17. Scan Product QR â—„â”€â”€â”€â”€â”€â”€â”€â”€ Use Product QR            â”‚
â”‚                                    â”‚                         â”‚
â”‚                                    â–¼                         â”‚
â”‚                            ğŸ‰ COMPLETE JOURNEY! ğŸ‰           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Success Criteria

After completing all 17 steps, you should have:

```
âœ… 4 Users registered (Farmer, Supplier, Industry, Consumer)
âœ… 1 Batch created with QR code
âœ… 2 Payments completed (Supplierâ†’Farmer, Industryâ†’Supplier)
âœ… 2 Ownership transfers recorded
âœ… 1 Final product created with new QR code
âœ… 4 Chain events in database
âœ… Complete traceability from farm to consumer
```

---

**ğŸŒ¿ Complete Transparency Achieved! ğŸŒ¿**
